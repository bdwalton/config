# Umask
umask 027

# Lines configured by zsh-newuser-install
HISTFILE=~/.zsh_history
HISTSIZE=20000
SAVEHIST=20000

# Just in case, force emacs mode
bindkey -e

# Strip out /, so that we can kill path components with delete back
# word.
WORDCHARS=${WORDCHARS//[\/]}

# End of lines configured by zsh-newuser-install
# The following lines were added by compinstall
zstyle :compinstall filename '/home/bwalton/.zshrc'

autoload -Uz compinit
compinit
# End of lines added by compinstall

autoload -U colors && colors

PROMPT="%B%{$fg[green]%}%n%{$reset_color%}%b @ %B%{$fg[blue]%}%m%b %{$reset_color%}: %{$fg[red]%}%3~
%{$reset_color%}(%?) %# "


DIRSTACKFILE="$HOME/.cache/zsh/dirs"
if [[ -f $DIRSTACKFILE ]] && [[ $#dirstack -eq 0 ]]; then
  dirstack=( ${(f)"$(< $DIRSTACKFILE)"} )
  [[ -d $dirstack[1] ]] && cd $dirstack[1]
fi
chpwd() {
  print -l $PWD ${(u)dirstack} >$DIRSTACKFILE
}

DIRSTACKSIZE=20

setopt autopushd pushdsilent pushdtohome

## Remove duplicate entries
setopt pushdignoredups

## This reverts the +/- operators.
setopt pushdminus

# History options
setopt \
  append_history \
  hist_allow_clobber \
  hist_find_no_dups \
  hist_ignore_all_dups \
  hist_ignore_dups \
  hist_ignore_space \
  hist_save_no_dups \
  inc_append_history \
  share_history \

# Define aliases.
alias cd/='cd /'
alias cd..='cd ..'
alias cd...='cd ../..'
alias cp='nocorrect cp -i'
alias d='dirs -v'
alias dlbf='rm -f (.*~|*~)'
alias dlb='rm  -i (.*~|*~)'
alias grep=egrep
alias h=history
alias j=jobs
alias lc='ls -h -l --color=yes | less'
alias lca='ls -h -l -A --color=yes | less'
alias lld='ls -ld *(-/DN)'
alias ll='ls -lh'
alias mkdir='nocorrect mkdir'
alias mmv='noglob zmv -W'
alias mv='nocorrect mv -i'
alias po=popd
alias pu=pushd
alias rdlbf='find . -iname \*~ | xargs rm -f'
alias rezsh='nocorrect exec $SHELL'
alias rm='rm -i'
alias sudosh='nocorrect sudo $SHELL'
alias vew='source $(which virtualenvwrapper.sh)'
alias zmv='noglob zmv'

alias -g G="egrep"
alias -g H='|head'
alias -g L='|less'
alias -g T='|tail'
