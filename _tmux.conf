# We want tmux to spawn interactive, but not login shells. We reserve
# the login option for the terminal emulator (or native login) as that
# is where we auto-join tmux.
set -g default-command /bin/zsh
set -g default-shell /bin/zsh

# The default session
new-session -s main
new-window -n local /bin/zsh
new-window -n emacs -t 2 "/usr/bin/emacs -nw"


# Use C-a instead of C-b.
set -g prefix C-_
unbind-key C-b
bind-key C-_ last-window
bind-key _ send-prefix

# Basic keybindings.
bind-key Space next-window
bind-key '`' source ~/.tmux.conf
bind-key '*' choose-session
bind-key '"' choose-window
bind-key 'K' confirm-before kill-pane
bind-key 'N' command-prompt -p "Create new session:" "new-session -s %%"
bind-key '.' command-prompt -p "Move window to:" "swap-window -t '%%'"

# More straightforward key splits.
bind | split-window -h
bind h split-window -h
bind - split-window -v
bind v split-window -v

# Moving between panes.
bind-key -r h select-pane -L
bind-key -r j select-pane -D
bind-key -r k select-pane -U
bind-key -r l select-pane -R

# Options.
setw -g aggressive-resize on
setw -g alternate-screen off
setw -g automatic-rename on
setw -g clock-mode-style 24
setw -g mode-keys vi
setw -g mode-mouse off
setw -g monitor-activity on
setw -g xterm-keys on
set -g default-terminal screen-256color
set -g history-limit 10000
set -g set-titles-string "*#T"
set -g set-titles on
set -g visual-bell on
set -s escape-time 0
set -s quiet on

# Convenience shortcuts.
bind-key '/' command-prompt -p "Open man page for:" "split-window 'exec man %%'"
bind-key 'H' command-prompt -p "Open help for:" "split-window 'exec %% help | less'"
bind-key 'h' command-prompt -p "Open help for:" "split-window 'exec %% --help | less'"
bind-key 'p' split-window 'exec python'
